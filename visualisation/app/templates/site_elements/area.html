<div id="map"></div>
    <script>
        function initMap() {
            var location = {lat: {{ lat }}, lng: {{ lon }}}
            var map = new google.maps.Map(document.getElementById('map'), {
                center: location,
                zoom: 8,
                scaleControl: true
            });
            var marker = new google.maps.Marker({
                position: location,
                map: map,
                title: '{{ city_name }}'
            });
            var airports = [{{ airports|safe }}];
            var marker, i;
            for (i = 0; i < airports.length; i++) {  
                marker = new google.maps.Marker({
                    icon: 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png',
                    position: new google.maps.LatLng(airports[i][1], airports[i][2]),
                    map: map,
                    title: airports[i][0]
                });
            }
        }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?libraries=visualization&key=AIzaSyCF4AO5iTPfrK-4X0uWVb_7ztpP_Ze9r7Q&callback=initMap" async defer></script>